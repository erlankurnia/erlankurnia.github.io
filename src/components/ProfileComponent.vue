<template>
	<section v-if="dataUser != null && dataUser.navbarBrand" id="profile" class="pt-24 pb-16 lg:pb-0 max-xs:min-h-screen">
		<div class="container">
			<div class="flex flex-wrap">
				<div class="w-full px-4 pt-4 pb-0 text-center">
					<h4 class="mb-3 lan-section-title">PROFILE</h4>
				</div>
				<div class="w-full px-4 py-0 mb-0 lg:w-1/2">
					<div class="relative mt-10 lg:mt-9 lg:right-0">
						<img :src="dataUser.image" alt="Generated by https://www.fotor.com" class="w-full mx-auto" />
					</div>
				</div>
				<div class="w-full px-4 mt-12 lg:w-1/2">
					<h3 v-if="nameParts != null && nameParts.length > 0" class="lan-section-subtitle text-left">
						<span v-for="(name, index) in nameParts" :key="index">
							{{ name }}<span v-if="index < nameParts.length - 1" class="text-primary">_</span>
						</span>
					</h3>
					<table class="w-full mb-6 text-sm font-medium border-separate table-auto text-secondary sm:text-base">
						<thead>
							<tr>
								<th></th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							<template v-for="(data, index) in dataUser.profile">
								<tr v-if="index != 'name'" :key="index">
									<td class="text-primary">{{ data.label }}</td>
									<td class="w-4"></td>
									<td v-if="data.type == 'text'">{{ data.value }}</td>
									<td v-else-if="data.type == 'age'">{{ monthsToYears(monthDiff(data.value, new Date())) }}</td>
								</tr>
							</template>

							<!-- <tr>
								<td class="text-primary">Profession</td>
								<td class="w-4"></td>
								<td>Unity Developer</td>
							</tr>
							<tr>
								<td class="text-primary">Ages</td>
								<td class="w-4"></td>
								<td>{{ monthsToYears(monthDiff("1996-02-25", new Date())) }}</td>
							</tr>
							<tr>
								<td class="text-primary">Address</td>
								<td class="w-4"></td>
								<td>Cipenjo, Bogor, West Java</td>
							</tr>
							<tr>
								<td class="text-primary">Nationality</td>
								<td class="w-4"></td>
								<td>Indonesian</td>
							</tr> -->
							<tr v-if="dataUser.socialMedia?.email">
								<td class="text-primary">Email</td>
								<td class="w-4"></td>
								<td>
									<a :href="'mailto://' + dataUser.socialMedia.email">{{ dataUser.socialMedia.email }}</a>
								</td>
							</tr>
						</tbody>
					</table>

					<SocialMediaComponent></SocialMediaComponent>
				</div>
			</div>
		</div>
	</section>
</template>

<script>
import { inject } from "vue";
import dateTimeMixins from "../helper/mixins/dateTime";
import SocialMediaComponent from "./SocialMediaComponent.vue";

export default {
	mixins: [dateTimeMixins],
	name: "ProfileComponent",
	components: { SocialMediaComponent },
	setup() {
		const { dataUser, nameParts } = inject("dataUser");
		return {
			nameParts,
			dataUser,
		};
	},
};
</script>
